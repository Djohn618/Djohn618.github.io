// ===========================
// Language Translations
// ===========================
const translations = {
    de: {
        // Navigation
        'Home': 'Home',
        'Über mich': 'Über mich',
        'Arbeiten': 'Arbeiten',
        'Services': 'Services',
        'Kontakt': 'Kontakt',
        
        // Hero Section
        'Hallo, ich bin': 'Hallo, ich bin',
        'Informatiker & Webdesigner': 'Informatiker & Webdesigner',
        'Ich gestalte digitale Erlebnisse mit Präzision, Struktur und einem Auge für modernes Design.': 'Ich gestalte digitale Erlebnisse mit Präzision, Struktur und einem Auge für modernes Design.',
        'Portfolio ansehen': 'Portfolio ansehen',
        'Kontakt': 'Kontakt',
        
        // About Section
        'Über mich': 'Über mich',
        'Ich bin Deshan John, derzeit in der Ausbildung zum Informatiker bei der Haeusler AG. Parallel dazu engagiere ich mich beim JETZ Youth Lab, wo ich meine Kenntnisse in Webentwicklung und Programmierung erweitere.': 'Ich bin Deshan John, derzeit in der Ausbildung zum Informatiker bei der Haeusler AG. Parallel dazu engagiere ich mich beim JETZ Youth Lab, wo ich meine Kenntnisse in Webentwicklung und Programmierung erweitere.',
        'Was mich auszeichnet, ist meine Disziplin und strukturierte Arbeitsweise. Ich glaube an die Kraft von klarem Design und durchdachten Lösungen, die nicht nur funktional, sondern auch ästhetisch ansprechend sind.': 'Was mich auszeichnet, ist meine Disziplin und strukturierte Arbeitsweise. Ich glaube an die Kraft von klarem Design und durchdachten Lösungen, die nicht nur funktional, sondern auch ästhetisch ansprechend sind.',
        
        // Milestones Section
        'Mein Werdegang': 'Mein Werdegang',
        'Schulzeit in Sri Lanka': 'Schulzeit in Sri Lanka',
        'Sinhala Central College National School, Trincomalee': 'Sinhala Central College National School, Trincomalee',
        'Fundament, kultureller Background': 'Fundament, kultureller Background',
        'Fremdsprachenklasse in Reinach': 'Fremdsprachenklasse in Reinach',
        'Schweiz': 'Schweiz',
        'Integration, Sprachaufbau (Deutsch & Englisch)': 'Integration, Sprachaufbau (Deutsch & Englisch)',
        'Sekundarschule Reinach': 'Sekundarschule Reinach',
        'Niveau A → Niveau E': 'Niveau A → Niveau E',
        'Leistungsentwicklung & Vorbereitung auf die IT-Lehre': 'Leistungsentwicklung & Vorbereitung auf die IT-Lehre',
        'Heute': 'Heute',
        '2. Lehrjahr Informatiker Applikationsentwicklung': '2. Lehrjahr Informatiker Applikationsentwicklung',
        'Praxis, Software- & Webentwicklung': 'Praxis, Software- & Webentwicklung',
        
        // Work Section
        'Meine Arbeiten': 'Meine Arbeiten',
        'Eine moderne Website für einen Supermarkt mit responsivem Design und benutzerfreundlicher Navigation.': 'Eine moderne Website für einen Supermarkt mit responsivem Design und benutzerfreundlicher Navigation.',
        'Projekt ansehen': 'Projekt ansehen',
        'Entwicklung und Durchführung eines Python-Kurses für Jugendliche im Rahmen des JETZ Youth Lab.': 'Entwicklung und Durchführung eines Python-Kurses für Jugendliche im Rahmen des JETZ Youth Lab.',
        'Mehr erfahren': 'Mehr erfahren',
        'Content-Erstellung rund um Programmierung, Webdesign und Technologie-Themen.': 'Content-Erstellung rund um Programmierung, Webdesign und Technologie-Themen.',
        'Kanal besuchen': 'Kanal besuchen',
        
        // Services Section
        'Meine Services': 'Meine Services',
        'Landingpages': 'Landingpages',
        'Überzeugende Landingpages, die Besucher in Kunden verwandeln. Optimiert für Conversion und Performance.': 'Überzeugende Landingpages, die Besucher in Kunden verwandeln. Optimiert für Conversion und Performance.',
        'Business Websites': 'Business Websites',
        'Professionelle Unternehmenswebsites, die Ihre Marke stärken und Ihre Online-Präsenz aufbauen.': 'Professionelle Unternehmenswebsites, die Ihre Marke stärken und Ihre Online-Präsenz aufbauen.',
        'Website Redesign': 'Website Redesign',
        'Modernisierung bestehender Websites mit frischem Design und verbesserten Funktionen.': 'Modernisierung bestehender Websites mit frischem Design und verbesserten Funktionen.',
        
        // Skills Section
        'Meine Fähigkeiten': 'Meine Fähigkeiten',
        
        // Contact Section
        'Lassen Sie uns zusammenarbeiten! Kontaktieren Sie mich für Ihr nächstes Projekt.': 'Lassen Sie uns zusammenarbeiten! Kontaktieren Sie mich für Ihr nächstes Projekt.',
        
        // Footer
        'Alle Rechte vorbehalten.': 'Alle Rechte vorbehalten.',
        'Impressum': 'Impressum'
    },
    en: {
        // Navigation
        'Home': 'Home',
        'Über mich': 'About',
        'Arbeiten': 'Work',
        'Services': 'Services',
        'Kontakt': 'Contact',
        
        // Hero Section
        'Hallo, ich bin': 'Hello, I\'m',
        'Informatiker & Webdesigner': 'Computer Scientist & Web Designer',
        'Ich gestalte digitale Erlebnisse mit Präzision, Struktur und einem Auge für modernes Design.': 'I create digital experiences with precision, structure, and an eye for modern design.',
        'Portfolio ansehen': 'View Portfolio',
        'Kontakt': 'Contact',
        
        // About Section
        'Über mich': 'About Me',
        'Ich bin Deshan John, derzeit in der Ausbildung zum Informatiker bei der Haeusler AG. Parallel dazu engagiere ich mich beim JETZ Youth Lab, wo ich meine Kenntnisse in Webentwicklung und Programmierung erweitere.': 'I\'m Deshan John, currently training as a computer scientist at Haeusler AG. In parallel, I\'m involved with JETZ Youth Lab, where I expand my knowledge in web development and programming.',
        'Was mich auszeichnet, ist meine Disziplin und strukturierte Arbeitsweise. Ich glaube an die Kraft von klarem Design und durchdachten Lösungen, die nicht nur funktional, sondern auch ästhetisch ansprechend sind.': 'What distinguishes me is my discipline and structured approach to work. I believe in the power of clear design and well-thought-out solutions that are not only functional but also aesthetically pleasing.',
        
        // Milestones Section
        'Mein Werdegang': 'My Journey',
        'Schulzeit in Sri Lanka': 'School Years in Sri Lanka',
        'Sinhala Central College National School, Trincomalee': 'Sinhala Central College National School, Trincomalee',
        'Fundament, kultureller Background': 'Foundation, cultural background',
        'Fremdsprachenklasse in Reinach': 'Foreign Language Class in Reinach',
        'Schweiz': 'Switzerland',
        'Integration, Sprachaufbau (Deutsch & Englisch)': 'Integration, language development (German & English)',
        'Sekundarschule Reinach': 'Secondary School Reinach',
        'Niveau A → Niveau E': 'Level A → Level E',
        'Leistungsentwicklung & Vorbereitung auf die IT-Lehre': 'Performance development & preparation for IT apprenticeship',
        'Heute': 'Today',
        '2. Lehrjahr Informatiker Applikationsentwicklung': '2nd Year IT Application Development Apprentice',
        'Praxis, Software- & Webentwicklung': 'Practice, software & web development',
        
        // Work Section
        'Meine Arbeiten': 'My Work',
        'Eine moderne Website für einen Supermarkt mit responsivem Design und benutzerfreundlicher Navigation.': 'A modern website for a supermarket with responsive design and user-friendly navigation.',
        'Projekt ansehen': 'View Project',
        'Entwicklung und Durchführung eines Python-Kurses für Jugendliche im Rahmen des JETZ Youth Lab.': 'Development and implementation of a Python course for young people as part of JETZ Youth Lab.',
        'Mehr erfahren': 'Learn More',
        'Content-Erstellung rund um Programmierung, Webdesign und Technologie-Themen.': 'Content creation around programming, web design, and technology topics.',
        'Kanal besuchen': 'Visit Channel',
        
        // Services Section
        'Meine Services': 'My Services',
        'Landingpages': 'Landing Pages',
        'Überzeugende Landingpages, die Besucher in Kunden verwandeln. Optimiert für Conversion und Performance.': 'Compelling landing pages that convert visitors into customers. Optimized for conversion and performance.',
        'Business Websites': 'Business Websites',
        'Professionelle Unternehmenswebsites, die Ihre Marke stärken und Ihre Online-Präsenz aufbauen.': 'Professional business websites that strengthen your brand and build your online presence.',
        'Website Redesign': 'Website Redesign',
        'Modernisierung bestehender Websites mit frischem Design und verbesserten Funktionen.': 'Modernizing existing websites with fresh design and improved features.',
        
        // Skills Section
        'Meine Fähigkeiten': 'My Skills',
        
        // Contact Section
        'Lassen Sie uns zusammenarbeiten! Kontaktieren Sie mich für Ihr nächstes Projekt.': 'Let\'s work together! Contact me for your next project.',
        
        // Footer
        'Alle Rechte vorbehalten.': 'All rights reserved.',
        'Impressum': 'Legal Notice'
    }
};

// ===========================
// Global Variables
// ===========================
let currentLang = 'de';

// ===========================
// Dark Mode Toggle
// ===========================
function initDarkMode() {
    const darkModeToggle = document.getElementById('darkModeToggle');
    const body = document.body;
    
    // Check for saved preference
    const savedMode = localStorage.getItem('darkMode');
    if (savedMode === 'enabled') {
        body.classList.add('dark-mode');
        darkModeToggle.innerHTML = '<i class="fas fa-sun"></i>';
    }
    
    // Toggle dark mode
    darkModeToggle.addEventListener('click', () => {
        body.classList.toggle('dark-mode');
        
        if (body.classList.contains('dark-mode')) {
            localStorage.setItem('darkMode', 'enabled');
            darkModeToggle.innerHTML = '<i class="fas fa-sun"></i>';
        } else {
            localStorage.setItem('darkMode', 'disabled');
            darkModeToggle.innerHTML = '<i class="fas fa-moon"></i>';
        }
    });
}

// ===========================
// Language Switcher
// ===========================
function initLanguageSwitcher() {
    const langToggle = document.getElementById('langToggle');
    const langText = langToggle.querySelector('.lang-text');
    
    // Check for saved language preference
    const savedLang = localStorage.getItem('language');
    if (savedLang) {
        currentLang = savedLang;
        updateLanguage();
        langText.textContent = currentLang === 'de' ? 'EN' : 'DE';
    }
    
    langToggle.addEventListener('click', () => {
        currentLang = currentLang === 'de' ? 'en' : 'de';
        updateLanguage();
        langText.textContent = currentLang === 'de' ? 'EN' : 'DE';
        localStorage.setItem('language', currentLang);
    });
}

function updateLanguage() {
    const elements = document.querySelectorAll('[data-de]');
    
    elements.forEach(element => {
        const deText = element.getAttribute('data-de');
        const enText = element.getAttribute('data-en');
        
        if (currentLang === 'de') {
            element.textContent = deText;
        } else {
            element.textContent = enText;
        }
    });
    
    // Update HTML lang attribute
    document.documentElement.lang = currentLang;
}

// ===========================
// Mobile Menu Toggle
// ===========================
function initMobileMenu() {
    const hamburger = document.getElementById('hamburger');
    const mobileMenu = document.getElementById('mobileMenu');
    const mobileLinks = document.querySelectorAll('.mobile-nav-link');
    
    hamburger.addEventListener('click', () => {
        mobileMenu.classList.toggle('active');
        hamburger.classList.toggle('active');
    });
    
    // Close menu when a link is clicked
    mobileLinks.forEach(link => {
        link.addEventListener('click', () => {
            mobileMenu.classList.remove('active');
            hamburger.classList.remove('active');
        });
    });
    
    // Close menu when clicking outside
    document.addEventListener('click', (e) => {
        if (!hamburger.contains(e.target) && !mobileMenu.contains(e.target)) {
            mobileMenu.classList.remove('active');
            hamburger.classList.remove('active');
        }
    });
}

// ===========================
// Smooth Scroll for Anchor Links
// ===========================
function initSmoothScroll() {
    const links = document.querySelectorAll('a[href^="#"]');
    
    links.forEach(link => {
        link.addEventListener('click', (e) => {
            const href = link.getAttribute('href');
            
            // Skip if it's just "#" or "#impressum" (non-existent section)
            if (href === '#' || href === '#impressum') {
                e.preventDefault();
                return;
            }
            
            const target = document.querySelector(href);
            if (target) {
                e.preventDefault();
                const headerOffset = 80;
                const elementPosition = target.getBoundingClientRect().top;
                const offsetPosition = elementPosition + window.pageYOffset - headerOffset;
                
                window.scrollTo({
                    top: offsetPosition,
                    behavior: 'smooth'
                });
            }
        });
    });
}

// ===========================
// Fade-in Animation on Scroll
// ===========================
function initScrollAnimations() {
    const observerOptions = {
        threshold: 0.1,
        rootMargin: '0px 0px -50px 0px'
    };
    
    const observer = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
            if (entry.isIntersecting) {
                entry.target.classList.add('visible');
            }
        });
    }, observerOptions);
    
    // Observe all fade-in elements
    const fadeElements = document.querySelectorAll('.fade-in');
    fadeElements.forEach(element => {
        observer.observe(element);
    });
}

// ===========================
// Header Scroll Effect
// ===========================
function initHeaderScroll() {
    const header = document.querySelector('.header');
    let lastScroll = 0;
    
    window.addEventListener('scroll', () => {
        const currentScroll = window.pageYOffset;
        
        if (currentScroll > 100) {
            header.style.boxShadow = '0 4px 20px rgba(0, 0, 0, 0.1)';
        } else {
            header.style.boxShadow = '0 2px 10px rgba(0, 0, 0, 0.05)';
        }
        
        lastScroll = currentScroll;
    });
}

// ===========================
// Initialize All Functions
// ===========================
document.addEventListener('DOMContentLoaded', () => {
    initDarkMode();
    initLanguageSwitcher();
    initMobileMenu();
    initSmoothScroll();
    initScrollAnimations();
    initHeaderScroll();
});

// ===========================
// Add keyboard navigation support
// ===========================
document.addEventListener('keydown', (e) => {
    // ESC key closes mobile menu
    if (e.key === 'Escape') {
        const mobileMenu = document.getElementById('mobileMenu');
        const hamburger = document.getElementById('hamburger');
        mobileMenu.classList.remove('active');
        hamburger.classList.remove('active');
    }
});
